<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>30.06.2022</title>

		<link rel="stylesheet" href="dist/reset.css">
		<link rel="stylesheet" href="dist/reveal.css">
		<link rel="stylesheet" href="dist/theme/sky.css">

		<!-- Theme used for syntax highlighted code -->
		<link rel="stylesheet" href="plugin/highlight/monokai.css">
	</head>
	<body>
		<div class="reveal">
			<div class="slides">
				<section data-markdown>
					<textarea data-template>
						<section>
							<h2>Reaktionsmesser<br>Code</h2>
							Navigiere mit ⇚ ⤊ ⟱ ⇛
					  	</section>
					  	<section>
							Auf den folgenden Folien wird der Code Schritt für schritt erklärt
						</section>
					</textarea>
				</section>
				<section data-markdown>
					<textarea data-template>
						<section data-markdown id="Importe">
							<h2>Was sind Importe?</h2>
							Importe stellen dem Programmierer einfache Lösungen zur Kontrolle z.B. des Bildschirmes
						
							#include "Arduino.h"
							#include "heltec.h"
						</section>
						<section id="Variablen">
							<h2>Was sind Variablen?</h2>
							Einfache Daten wie eine Zahl oder ein Text werden als sogenannte Variablen erstellt mit denen das Programm arbeiten kann

							int ganzeZahl = 0; //erstellung von ganzeZahl mit dem Wert 0
							ganzeZahl = ganzeZahl + 1; ///ganzeZahl wird plus 1 gerechnet
							>>Ausgabe von ganzeZahl ist 1
						</section>
						<section id="Setup">
							<h2>Was ist setup()?</h2>
							Hier wird das Programm EINMAL AM ANFANG vorbereitet<br>
							In die runden Klammern werden benötigte Variablen eingetragen
							<br>in den geschweiften Klammern ist der Code drin
							
							void setup(ganzeZahl) { //setup beginnt und benötigt eine Zahl
								Heltec.begin(); //System started
								Heltec.display->setFont(ArialMT_Plain_10); //Schriftart
								Heltec.display->draw(0, 0, ganzeZahl); //zeichne ganzeZahl
								Heltec.display->display(); //aktualisiere den Bildschirm
							}

						</section>
						<section id="Loop">
							<h2>Was ist loop()?</h2>
							Hier wird Code so lange ausgeführt bis das System abgeschalten ist<br>
							Auch hier kommen Variablen in die runden Klammern und der Code in die geschweiften

							void loop() {
								int buttonStatus = digitalRead(pushButton); //Status des Buttons
								wenn(buttonStatus == 0) { //wird der Button gedrückt?
									beginneSpiel();
								}
								wenn nicht {
									//nichts warte weiter bis der Button gedrückt wird
								}
							}
						</section>
					</textarea>
				</section>
				<section data-markdown>
					<textarea data-template>
						## Importe

						Wir benötigen die Arduino Bibliothek, da das ein Microcontroller auf der Basis von Arduino ist
						```
						#include "Arduino.h"
						```
						
						Die Heltec Bibliothek benötigen wir um auf die Systemzeit, den Bildschirm und das Gerät selbst zugreifen zu können
						```
						#include "heltec.h"
						```
					</textarea>
				</section>
				<section data-markdown>
					<textarea data-template>
						<h2>Variablen</h2>
						<Section>
							Gesammter Code: 
							
							int pushButton = 0; //Button zum überwachen
							unsigned long timerStart1 = 0; //hier wird die Startzeit gespeichert
							boolean gameRuns = true; //hier wird gesehen ob das Spiel läuft
							unsigned long resultArray[5]; //für die 5 Zwischenergebnisse
							unsigned long averageTime = 0; //hier das Komplettergebnis
							int counter = 0; //hier werden die Versuche gezählt
						</Section>
						<section>
							Den Button den wir sehen wollen hat die ID von 0
							<br>
							<br>Also setzen wir im Code eine Variable um die Zahl nicht merken zu müssen oder einfach ändern zu können
							<br><br>

							int pushButton = 0; //Button zum überwachen

						</section>
						<section>
							Dann brauchen wir noch für die 5 Ergebnisse einen Zwischenspeicher und eins für das Gesammtergebnis

							unsigned long resultArray[5]; //für die 5 Zwischenergebnisse
							unsigned long averageTime = 0; //hier das Komplettergebnis
						</section>
						<section>
							Die Zeit muss aufgezeichnet werden<br>
							Dafür brauchen wir nur die Startzeit

							unsigned long timerStart1 = 0; //hier wird die Startzeit gespeichert
						</section>
						<section>
							Das einzige das Fehlt sind Werte um zu sehen ob das Spiel läuft <br>
							Ein Wahrheitswert (Wahr/falsch) um zu sehen ob das Spiel läuft oder nicht <br>
							Und ein Counter für die 5 Runden

							boolean gameRuns = true; //hier wird gesehen ob das Spiel läuft
							int counter = 0; //hier werden die Versuche gezählt
						</section>
					</textarea>
				</section>
				<section data-markdown>
					<textarea data-template>
						<h2>Setup(){}</h2>
						<Section>
							Gesammter Code: 
							
							void setup() {
								//Starte den Microcontroller
								Heltec.begin(true /*DisplayEnable Enable*/, false /*LoRa Disable*/, true /*Serial Enable*/);
								Heltec.display->init(); //Starte den Bildschirm
								Heltec.display->setFont(ArialMT_Plain_10); //Schriftart
								//Schreibe "Hello, I'm happy today"
								Heltec.display->drawString(0, 0, "Hello, I'm happy today");
								Heltec.display->display(); //aktualisiere den Bildschirm
								//setze den Anschluss pushButton als Eingang
								pinMode(pushButton, INPUT); 
								pinMode(25, OUTPUT); //setze den Anschluss 25 als Ausgang
							}
						</Section>
						<section>
							Erstmal muss es ein Ort für den erstmalig ausgeführten Code geben

							void setup() {
							
							}
						</section>
						<section>
							in dem wird der Microcontroller gestarted

							void setup() {
								Heltec.begin(true /*DisplayEnable Enable*/, //Display verwendbar
										false /*LoRa Disable*/, 
										true /*Serial Enable*/); //Meldungen für Fehlerbehebung
							}
						</section>
						<section>
							Das Display wird aktiviert und die Schriftart festgelegt

							Heltec.display->init(); //Starte den Bildschirm
							Heltec.display->setFont(ArialMT_Plain_10); //Schriftart
						</section>
						<section>
							Die erste Nutzung des Bildschirms zum testen <br>
							Dabei wird erst vorgegeben, was gemacht werden soll und in der nächsten Zeile der Bildschirm aktualisiert

							//Schreibe "Hello, I'm happy today"
							Heltec.display->drawString(0, 0, "Hello, I'm happy today");
							Heltec.display->display(); //aktualisiere den Bildschirm
						</section>
					</textarea>
				</section>
				<section data-markdown>
					<textarea data-template>
						<h2>loop(){}</h2>
						<Section>
							<br>
							Gesammter Code: <br> (Pfeil Runter für Erklärung)
							
							void loop() {
								// read the input pin:
								int buttonState = digitalRead(pushButton);
								Heltec.display->clear();
								Heltec.display->drawString(0,0,"Drücke PRG zum Starten");
								if(averageTime != 0){Heltec.display->drawString(0,20, "durchschnittliche Zeit: " + String(averageTime));}
								Heltec.display->display();
								//here starts the Game
								if(buttonState == 0)
								{
								  while(counter < 5)
								  {
									Heltec.display->clear();
									Heltec.display->drawString(0,0, "drücke bei weißer LED");
									Heltec.display->display();
									delay(random(1000, 5000)); 
									digitalWrite(25, 1);  // sets the digital pin 25 on
									gameRuns = true;
									timerStart1 = millis();
									while(gameRuns)
									{
									  Heltec.display->clear();
									  Heltec.display->drawString(0,0, "Versuch " + String(counter+1));
									  Heltec.display->drawString(0,20, String(millis() - timerStart1));
									  if(digitalRead(pushButton) == 0)
									  {
										gameRuns = false;
										resultArray[counter] = millis() - timerStart1;
										digitalWrite(25, 0);  // sets the sdigital pin 25 off
									  }
									  Heltec.display->display();
									}
									delay(1000);
									counter++;
								  }
								  counter = 0;
								  averageTime = (resultArray[0] + resultArray[1] + resultArray[2] + resultArray[3] + resultArray[4])/5;
								}
							  }
							  
						</Section>
					</textarea>
				</section>
			</div>
		</div>

		<script src="dist/reveal.js"></script>
		<script src="plugin/notes/notes.js"></script>
		<script src="plugin/markdown/markdown.js"></script>
		<script src="plugin/highlight/highlight.js"></script>
		<script>
			// More info about initialization & config:
			// - https://revealjs.com/initialization/
			// - https://revealjs.com/config/
			Reveal.initialize({
				hash: true,

				// Learn about plugins: https://revealjs.com/plugins/
				plugins: [ RevealMarkdown, RevealHighlight, RevealNotes ]
			});
		</script>
	</body>
</html>
